## PUT 500 на 10 секунд

Решил начать с малого, чтобы просто опробовать работу с wrk. Начал с вставки данных.

### Перцентили:
```
 50.000%    2.50ms
 75.000%    5.01ms
 90.000%   11.49ms
 99.000%   73.47ms
 99.900%  157.70ms
 99.990%  166.78ms
 99.999%  166.78ms
100.000%  166.78ms
```

Можно отметить уже приличное время на 90-ом и 99-ом перцентиле. 
Одно из предположений: работа проводилась на виртуалке.

## PUT 3000 на 30 секунд

Далее решил попробовать увеличить количество запросов до 3000, а время до 30 секунд.

### Перцентили:
```
 50.000%    6.73ms
 75.000%   20.35ms
 90.000%   37.31ms
 99.000%  517.12ms
 99.900%  647.17ms
 99.990%  659.46ms
 99.999%  659.97ms
100.000%  659.97ms
```

Отметим значительное увеличение времени. Однако, даже при таких данных почти 100% удается обработать.
Еще стоит отметить, что при прогретом сервере время может упасть чуть ли не в 10 раз, но также оставаться высоким.

На 10000 также возрасло время, но почти 100% запросов были обработаны.

## PUT 25000 на 30 секунд

### Перцентили:
```
 50.000%    4.27s 
 75.000%    6.35s 
 90.000%    6.98s 
 99.000%    7.22s 
 99.900%    8.26s 
 99.990%    8.36s 
 99.999%    8.37s 
100.000%    8.37s 
```

На 25000 запросов как я понял, сервер уже не тянул и порядка 30% запросов не успели пройти.
Соответсвенно уже даже при 50-ом перцентиле время ответа достаточно немаленькое.

Далее на 3000 и 10000 запросов сделал графа для анализа нагрузки на CPU и просмотра аллокаций и будут ли какие-то изменения.

### Flame Graph (CPU)

Как я понял, из графа 40% уходит на работу самой виртуалки, что также может являться причиной долгой работы 
обработки запросов из данных перцентилей выше.

### Flame Graph (ALLOC)

## GET 500 на 10 секунд

### Перцентили:
```

```

## GET 3000 на 30 секунд

### Перцентили:
```

```

## GET 25000 на 30 секунд

### Перцентили:
```

```

### Flame Graph (CPU)

### Flame Graph (ALLOC)

# Предложения по оптимизации
- Не работать на виртуалке
- Попробовать изменить настройки сервера
- Так как много ресурсов уходит на работу со строками, то получать id сразу в байтах